(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{474:function(s,a){s.exports="data:image/png;base64,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"},503:function(s,a,t){"use strict";t.r(a);var e=t(19),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("Tips")]),s._v(" "),e("p",[s._v("本文从Centos 7.x系列系统的16个角度来加固主机的安全性，不足之处，敬请谅解。")])]),s._v(" "),e("h2",{attrs:{id:"一、密码长度与有效期"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、密码长度与有效期"}},[s._v("#")]),s._v(" 一、密码长度与有效期")]),s._v(" "),e("h3",{attrs:{id:"_1-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-默认配置"}},[s._v("#")]),s._v(" 1.1 默认配置")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/login.defs "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" PASS_ "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("ul",[e("li",[s._v("PASS_MAX_DAYS 99999")]),s._v(" "),e("li",[s._v("PASS_MIN_DAYS 0")]),s._v(" "),e("li",[s._v("PASS_MIN_LEN 5")]),s._v(" "),e("li",[s._v("PASS_WARN_AGE 7")])])]),s._v(" "),e("h3",{attrs:{id:"_1-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-加固方案"}},[s._v("#")]),s._v(" 1.2 加固方案：")]),s._v(" "),e("h4",{attrs:{id:"_1-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-备份配置文件"}},[s._v("#")]),s._v(" 1.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/login.defs /etc/login.defs.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_1-2-2-编辑配置文件并将相关参数改成如下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-编辑配置文件并将相关参数改成如下"}},[s._v("#")]),s._v(" 1.2.2 编辑配置文件并将相关参数改成如下")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/login.defs\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("ul",[e("li",[s._v("PASS_MAX_DAYS 90")]),s._v(" "),e("li",[s._v("PASS_MIN_DAYS 6")]),s._v(" "),e("li",[s._v("PASS_MIN_LEN 8")]),s._v(" "),e("li",[s._v("PASS_WARN_AGE 30")])])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("备注")]),s._v(" "),e("p",[s._v("/etc/login.defs文件的pass_min_len 参数并不具备强制性，测试仍然可以设置7位密码。最终需要cracklib来实现。")])]),s._v(" "),e("h4",{attrs:{id:"_1-2-3-参数说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-参数说明"}},[s._v("#")]),s._v(" 1.2.3 参数说明:")]),s._v(" "),e("blockquote",[e("ul",[e("li",[s._v("PASS_MAX_DAYS 密码有效期")]),s._v(" "),e("li",[s._v("PASS_MIN_DAYS 修改密码的最短期限")]),s._v(" "),e("li",[s._v("PASS_MIN_LEN 密码最短长度")]),s._v(" "),e("li",[s._v("PASS_WARN_AGE 密码过期提醒")])])]),s._v(" "),e("h2",{attrs:{id:"二、密码复杂度"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、密码复杂度"}},[s._v("#")]),s._v(" 二、密码复杂度")]),s._v(" "),e("h3",{attrs:{id:"_2-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-默认配置"}},[s._v("#")]),s._v(" 2.1 默认配置")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/pam.d/system-auth "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pam_pwquality.so try_first_pass local_users_only retry=3 authtok_type="')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("password requisite pam_pwquality.so try_first_pass local_users_only retry=3 authtok_type=")])]),s._v(" "),e("h3",{attrs:{id:"_2-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-加固方案"}},[s._v("#")]),s._v(" 2.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_2-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-备份配置文件"}},[s._v("#")]),s._v(" 2.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/pam.d/system-auth /etc/pam.d/system-auth.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_2-2-2-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-编辑配置文件"}},[s._v("#")]),s._v(" 2.2.2 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/pam.d/system-auth\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将")]),s._v(" "),e("blockquote",[e("ul",[e("li",[s._v("password requisite pam_pwquality.so try_first_pass local_users_only retry=3 authtok_type=")])])]),s._v(" "),e("p",[s._v("注释并在其下面新增1行")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("password requisite pam_cracklib.so try_first_pass "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("minlen")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("difok")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dcredit")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1 "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lcredit")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1 "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ocredit")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1 "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("retry")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\n:wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("备注")]),s._v(" "),e("p",[s._v("try_first_pass而当pam_unix验证模块与password验证类型一起使用时，该选项主要用来防止用户新设定的密码与以前的旧密码相同。")]),s._v(" "),e("blockquote",[e("ul",[e("li",[s._v("minlen=8：最小长度8位")]),s._v(" "),e("li",[s._v("difok=5:新、旧密码最少5个字符不同")]),s._v(" "),e("li",[s._v("dcredit=-1：最少1个数字")]),s._v(" "),e("li",[s._v("lcredit=-1：最少1个小写字符，（ucredit=-1:最少1个大写字符)")]),s._v(" "),e("li",[s._v("ocredit=-1：最少1个特殊字符")]),s._v(" "),e("li",[s._v("retry=1:1次错误后返回错误信息")]),s._v(" "),e("li",[s._v("type=xxx：此选项用来修改缺省的密码提示文本")])])])]),s._v(" "),e("h2",{attrs:{id:"三、新口令不能与4个最近使用的相同"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、新口令不能与4个最近使用的相同"}},[s._v("#")]),s._v(" 三、新口令不能与4个最近使用的相同")]),s._v(" "),e("h3",{attrs:{id:"_3-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-默认配置"}},[s._v("#")]),s._v(" 3.1 默认配置")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/pam.d/system-auth "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" use_authtok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("ssword sufficient pam_unix.so sha512 shadow nullok try_first_pass use_authtok")])]),s._v(" "),e("h3",{attrs:{id:"_3-2加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2加固方案"}},[s._v("#")]),s._v(" 3.2加固方案")]),s._v(" "),e("h4",{attrs:{id:"_3-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-备份配置文件"}},[s._v("#")]),s._v(" 3.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/pam.d/system-auth /etc/pam.d/system-auth.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_3-3-2-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-编辑配置文件"}},[s._v("#")]),s._v(" 3.3.2 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/pam.d/system-auth\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在password sufficient pam_unix.so sha512 shadow nullok try_first_pass use_authtok 所在行的后面添加")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("member")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记住5个历史密码")]),s._v("\n\n:wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"四、设置会话超时-5分钟"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、设置会话超时-5分钟"}},[s._v("#")]),s._v(" 四、设置会话超时（5分钟）")]),s._v(" "),e("h3",{attrs:{id:"_4-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-默认配置"}},[s._v("#")]),s._v(" 4.1 默认配置")]),s._v(" "),e("p",[e("font",{attrs:{color:"red"}},[e("strong",[s._v("无")])])],1),s._v(" "),e("h3",{attrs:{id:"_4-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-加固方案"}},[s._v("#")]),s._v(" 4.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_4-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-备份配置文件"}},[s._v("#")]),s._v(" 4.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/profile /etc/profile.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_4-2-2-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-编辑配置文件"}},[s._v("#")]),s._v(" 4.2.2 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile\n在文件的末尾添加参数\n\nport "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TMOUT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 五分钟无操作中断登录会话")]),s._v("\n\n:wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"五、设置history命令时间戳"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、设置history命令时间戳"}},[s._v("#")]),s._v(" 五、设置history命令时间戳")]),s._v(" "),e("h3",{attrs:{id:"_5-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-默认配置"}},[s._v("#")]),s._v(" 5.1 默认配置")]),s._v(" "),e("p",[e("font",{attrs:{color:"red"}},[e("strong",[s._v("无")])])],1),s._v(" "),e("h3",{attrs:{id:"_5-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-加固方案"}},[s._v("#")]),s._v(" 5.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_5-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-备份配置文件"}},[s._v("#")]),s._v(" 5.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/profile /etc/profile.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_5-2-2-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2-编辑配置文件"}},[s._v("#")]),s._v(" 5.2.2 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile\n在文件的末尾添加参数\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HISTTIMEFORMAT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%F %T ‘whoami’ "')]),s._v("\n\n:wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"六、设置登陆失败锁定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、设置登陆失败锁定"}},[s._v("#")]),s._v(" 六、设置登陆失败锁定")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("（只能限定终端登录，图形界面依然可以登录）")])]),s._v(" "),e("h3",{attrs:{id:"_6-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-默认配置"}},[s._v("#")]),s._v(" 6.1 默认配置")]),s._v(" "),e("p",[e("font",{attrs:{color:"red"}},[e("strong",[s._v("无")])])],1),s._v(" "),e("h3",{attrs:{id:"_6-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-加固方案"}},[s._v("#")]),s._v(" 6.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_6-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-1-备份配置文件"}},[s._v("#")]),s._v(" 6.2.1 备份配置文件")]),s._v(" "),e("p",[e("strong",[s._v("1）方法一修改PAM配置文件")])]),s._v(" "),e("blockquote",[e("p",[s._v("/etc/pam.d/login中设定控制台")]),s._v(" "),e("p",[s._v("/etc/pam.d/sshd中设定SSH")]),s._v(" "),e("p",[s._v("/etc/pam.d/sshd中第二行添加下列信息")])]),s._v(" "),e("p",[e("img",{attrs:{src:t(474),alt:"avatar"}})]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("pam_tally2 --user root  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看用户登录失败次数")]),s._v("\n\npam_tally2 -r -u root  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解锁用户")]),s._v("\n\neven_deny_root  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 也限制root用户(默认配置就锁定root帐号)")]),s._v("\n\ndeny  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置普通用户和root用户连续错误登陆的最大次数，超过最大次数，则锁定该用户")]),s._v("\n\nunlock_time  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设定普通用户锁定后，多少时间后解锁，单位是秒")]),s._v("\n\nroot_unlock_time  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设定root用户锁定后，多少时间后解锁，单位是秒")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[e("strong",[s._v("2）方法二修改PAM Auth配置文件：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/pam.d/system-auth\n在"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# User changes will be destroyed the next time authconfig is run.行的下面，添加")]),s._v("\n\nauth required pam_tally2.so "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("deny")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("unlock_time")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1800")]),s._v(" even_deny_root "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("root_unlock_time")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1800")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过终端登录，5次登录失败后锁定账号30分钟，锁定期间此账号无法再次登录")]),s._v("\n\n:wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"七、禁止root通过ssh远程登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七、禁止root通过ssh远程登录"}},[s._v("#")]),s._v(" 七、禁止root通过ssh远程登录")]),s._v(" "),e("h3",{attrs:{id:"_7-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-默认配置"}},[s._v("#")]),s._v(" 7.1 默认配置")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/ssh/sshd_config |grep PermitRootLogin")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#PermitRootLogin yes")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"_7-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-加固方案"}},[s._v("#")]),s._v(" 7.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_7-2-1备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-1备份配置文件"}},[s._v("#")]),s._v(" 7.2.1备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/ssh/sshd_config /etc/ssh/sshd_config.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_7-2-2-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-2-编辑配置文件"}},[s._v("#")]),s._v(" 7.2.2 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config\n\n将配置参数"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#PermitRootLogin yes改成PermitRootLogin no")]),s._v("\n\n:wq\n\nsystemctl restart sshd\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("PermitRootLogin参数设置为"),e("strong",[s._v("no")]),s._v("后root用户无法直接登录，必须用普通用户登录 提权 后才能使用root权限")])]),s._v(" "),e("h2",{attrs:{id:"八、ssh-配置参数增强"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#八、ssh-配置参数增强"}},[s._v("#")]),s._v(" 八、SSH 配置参数增强")]),s._v(" "),e("h3",{attrs:{id:"_8-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-备份配置文件"}},[s._v("#")]),s._v(" 8.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/ssh/sshd_config /etc/ssh/sshd_config.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_8-2-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-编辑配置文件"}},[s._v("#")]),s._v(" 8.2 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("）禁止空密码登录\n将"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#PermitEmptyPasswords no参数的注释符号去掉，改成")]),s._v("\n\nPermitEmptyPasswords no\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("）关闭ssh的tcp转发\n将"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#AllowTcpForwarding yes参数改成")]),s._v("\n\nAllowTcpForwarding no\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("）关闭S/KEY（质疑-应答"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("认证方式\n将"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ChallengeResponseAuthentication yes参数，改成")]),s._v("\n\nChallengeResponseAuthentication no\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("）关闭基于GSSAPI 的用户认证\n将GSSAPIAuthentication yes参数，改成\n\nGSSAPIAuthentication no\n\n:wq\n\nsystemctl restart sshd\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("h2",{attrs:{id:"九、设置ssh登录警告语"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#九、设置ssh登录警告语"}},[s._v("#")]),s._v(" 九、设置SSH登录警告语")]),s._v(" "),e("h3",{attrs:{id:"_9-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-默认配置"}},[s._v("#")]),s._v(" 9.1 默认配置")]),s._v(" "),e("p",[e("font",{attrs:{color:"red"}},[e("strong",[s._v("无")])])],1),s._v(" "),e("h3",{attrs:{id:"_9-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-加固方案"}},[s._v("#")]),s._v(" 9.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_9-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-1-备份配置文件"}},[s._v("#")]),s._v(" 9.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/ssh/sshd_config /etc/ssh/sshd_config.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_9-2-2-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-2-编辑配置文件"}},[s._v("#")]),s._v(" 9.2.2 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config\n\n找到"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Banner none参数，在其下一行，增加")]),s._v("\n\nBanner /etc/ssh/alert\n\n:wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"_9-2-3-新增告警信息文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-3-新增告警信息文件"}},[s._v("#")]),s._v(" 9.2.3 新增告警信息文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/alert\n文件内容，设置成\n\n*******************************************************\n\n这部分内容自定义，可以提示一下登录的用户引起运维人员重视\n\nWarning"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("Any Access Without Permission Is Forbidden"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\n          警告"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" 未经许可禁止访问！！！\n\n*******************************************************\n\n:wq\n\nsystemctl restart sshd\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h2",{attrs:{id:"十、设置umask值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十、设置umask值"}},[s._v("#")]),s._v(" 十、设置umask值")]),s._v(" "),e("h3",{attrs:{id:"_10-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-默认配置"}},[s._v("#")]),s._v(" 10.1 默认配置")]),s._v(" "),e("blockquote",[e("p",[s._v("#umask")]),s._v(" "),e("p",[s._v("0022")])]),s._v(" "),e("h3",{attrs:{id:"_10-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-加固方案"}},[s._v("#")]),s._v(" 10.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_10-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-1-备份配置文件"}},[s._v("#")]),s._v(" 10.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/bashrc /etc/bashrc.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_10-2-2-编辑用户变量配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-2-编辑用户变量配置文件"}},[s._v("#")]),s._v(" 10.2.2 编辑用户变量配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/bashrc\n\n在文件末尾增加参数\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" 027\n\n:wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h4",{attrs:{id:"_10-2-3-备份系统变量配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-3-备份系统变量配置文件"}},[s._v("#")]),s._v(" 10.2.3 备份系统变量配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/profile /etc/pr ofile.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_10-2-4-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-4-编辑配置文件"}},[s._v("#")]),s._v(" 10.2.4 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n\n在文件末尾增加参数\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" 027\n\n:wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("备注")]),s._v(" "),e("p",[s._v("将umask值设置成0027，用于拿掉新增目录与文件的非所有者和所有者所属组的访问权限")]),s._v(" "),e("p",[s._v("默认：")]),s._v(" "),e("p",[s._v("新增目录权限755，即 rxwr-xr-x")]),s._v(" "),e("p",[s._v("新增文件权限644，即 rw-r–r—")]),s._v(" "),e("p",[s._v("加固后：")]),s._v(" "),e("p",[s._v("新增目录权限750，即 rxwr-x—")]),s._v(" "),e("p",[s._v("新增文件权限640，即 rw-r-----")])]),s._v(" "),e("h2",{attrs:{id:"十一、禁止control-alt-delete-键盘重启系统命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十一、禁止control-alt-delete-键盘重启系统命令"}},[s._v("#")]),s._v(" 十一、禁止Control-Alt-Delete 键盘重启系统命令")]),s._v(" "),e("h3",{attrs:{id:"_11-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-1-默认配置"}},[s._v("#")]),s._v(" 11.1 默认配置")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /usr/lib/systemd/system/ctrl-alt-del.target\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_11-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-加固方案"}},[s._v("#")]),s._v(" 11.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_11-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-1-备份配置文件"}},[s._v("#")]),s._v(" 11.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /usr/lib/systemd/system/ctrl-alt-del.target /usr/lib/systemd/system/ctrl-alt-del.target.default\n\n移除该原源文件\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /usr/lib/systemd/system/ctrl-alt-del.target\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"十二、隐藏系统版本信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十二、隐藏系统版本信息"}},[s._v("#")]),s._v(" 十二、隐藏系统版本信息")]),s._v(" "),e("h2",{attrs:{id:"_12-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-默认配置"}},[s._v("#")]),s._v(" 12.1 默认配置")]),s._v(" "),e("p",[e("font",{attrs:{color:"red"}},[e("strong",[s._v("无")])])],1),s._v(" "),e("h2",{attrs:{id:"_12-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-2-加固方案"}},[s._v("#")]),s._v(" 12.2 加固方案:")]),s._v(" "),e("p",[s._v("执行以下命令：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /etc/issue /etc/issue.bak\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /etc/issue.net /etc/issue.net.bak\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录界面显示系统版本信息")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"十三、设置grup密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十三、设置grup密码"}},[s._v("#")]),s._v(" 十三、设置grup密码")]),s._v(" "),e("h3",{attrs:{id:"_13-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-默认配置"}},[s._v("#")]),s._v(" 13.1 默认配置")]),s._v(" "),e("p",[e("font",{attrs:{color:"red"}},[e("strong",[s._v("无")])])],1),s._v(" "),e("h3",{attrs:{id:"_13-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-加固方案"}},[s._v("#")]),s._v(" 13.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_13-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-1-备份配置文件"}},[s._v("#")]),s._v(" 13.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/grub.d/00_header /etc/grub.d/00_header.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_13-2-2-使用grub2-mkpasswd-pbkdf2-加密"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-2-使用grub2-mkpasswd-pbkdf2-加密"}},[s._v("#")]),s._v(" 13.2.2 使用grub2-mkpasswd-pbkdf2 加密")]),s._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("Tips")]),s._v(" "),e("p",[s._v("使用grub2-mkpasswd-pbkdf2 加密密码（密码自己定义，但是一定得保存好否则最后连自己都登录不进去）")])]),s._v(" "),e("p",[e("strong",[s._v("操作进行GRUB加密码的2种方式")])]),s._v(" "),e("p",[e("em",[e("strong",[s._v("密文密码")])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grub2-mkpasswd-pbkdf2")]),s._v("\n\nEnter password:\n\nReenter password:\n\nPBKDF2 "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("hash")]),s._v(" of your password is grub.pbkdf2.sha512.10000.B157F42E96462AB239C03000F113D32EB18FD48073F1FC7D8F87A8F3B3F89F662424ECCAB901F3A812A997E547FD520F3E99D0E080F4FE8B05E019757E34F75B.29C83F87B4B6C086FC9A81E046CC3623CC5CF2F82128EDC3A0364894E429D4993B28563F82D71BF346188108CBD4341FC4A71B90E543581646B4E7EAE920C54A\n\n添加以下配置到该文件的最后面\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("特别需要注意 用户名root和密文之间是空格分隔，而不是换行"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v("EOF\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("superusers")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("\n\npassword_pbkdf2 root grub.pbkdf2.sha512.10000.B157F42E96462AB239C03000F113D32EB18FD48073F1FC7D8F87A8F3B3F89F662424ECCAB901F3A812A997E547FD520F3E99D0E080F4FE8B05E019757E34F75B.29C83F87B4B6C086FC9A81E046CC3623CC5CF2F82128EDC3A0364894E429D4993B28563F82D71BF346188108CBD4341FC4A71B90E543581646B4E7EAE920C54A\n\nE0F\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("p",[s._v("执行命令")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("grub2-mkconfig -o /boot/grub2/grub.cfg\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("重新编译生成grub.cfg文件")]),s._v(" "),e("p",[e("em",[e("strong",[s._v("明文密码")])])]),s._v(" "),e("p",[s._v("修改/etc/grub.d/00_header,在文件末尾添加以下命令")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#admin by change grub password")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\nset superusers='user1'\npassword user1 123456\nEOF")]),s._v("\n\n:wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("重新编译生成grub.cfg")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("grub2-mkconfig -o /boot/grub2/grub.cfg\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("重启检验，如用户密码输入“user1 123456”能成功登录系统，且能看到内核则成功")]),s._v(" "),e("h2",{attrs:{id:"十四、最大文件打开数-文件句柄数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十四、最大文件打开数-文件句柄数"}},[s._v("#")]),s._v(" 十四、最大文件打开数（文件句柄数）")]),s._v(" "),e("h3",{attrs:{id:"_14-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_14-1-默认配置"}},[s._v("#")]),s._v(" 14.1 默认配置")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@i-1y3we23j ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ulimit -n")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"_14-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_14-2-加固方案"}},[s._v("#")]),s._v(" 14.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_14-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_14-2-1-备份配置文件"}},[s._v("#")]),s._v(" 14.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/security/limits.conf /etc/security/limits.conf.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_14-2-2-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_14-2-2-编辑配置文件"}},[s._v("#")]),s._v(" 14.2.2 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("添加以下两行配置到limits.conf文件最后\nsoft nofile "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\n\nhard nofile "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改所有用户的最大文件打开数为65535")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"十五、用户最大进程数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十五、用户最大进程数"}},[s._v("#")]),s._v(" 十五、用户最大进程数")]),s._v(" "),e("h3",{attrs:{id:"_15-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-1-默认配置"}},[s._v("#")]),s._v(" 15.1 默认配置")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/security/limits.d/20-nproc.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("Default limit "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" number of user's processes to prevent\naccidental fork bombs.\nSee rhbz "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#432903 for reasoning.")]),s._v("\nsoft  nproc   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nroot    soft  nproc   unlimited\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"_15-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-加固方案"}},[s._v("#")]),s._v(" 15.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_15-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-1-备份配置文件"}},[s._v("#")]),s._v(" 15.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/security/limits.d/20-nproc.conf /etc/security/limits.d/20-nproc.conf.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_15-2-2-修改配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-2-修改配置文件"}},[s._v("#")]),s._v(" 15.2.2 修改配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/security/limits.d/20-nproc.conf\nsoft   nproc   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\nhard  nproc   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改所有用户的最大进程数为65535")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"十六、系统内核参数调优"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十六、系统内核参数调优"}},[s._v("#")]),s._v(" 十六、系统内核参数调优")]),s._v(" "),e("h3",{attrs:{id:"_16-1-默认配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_16-1-默认配置"}},[s._v("#")]),s._v(" 16.1 默认配置")]),s._v(" "),e("p",[e("font",{attrs:{color:"red"}},[e("strong",[s._v("无")])])],1),s._v(" "),e("h3",{attrs:{id:"_16-2-加固方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_16-2-加固方案"}},[s._v("#")]),s._v(" 16.2 加固方案")]),s._v(" "),e("h4",{attrs:{id:"_16-2-1-备份配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_16-2-1-备份配置文件"}},[s._v("#")]),s._v(" 16.2.1 备份配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a /etc/sysctl.conf /etc/sysctl.conf.default\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_16-2-2-编辑配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_16-2-2-编辑配置文件"}},[s._v("#")]),s._v(" 16.2.2 编辑配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("net.ipv4.ip_forward "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.conf.default.rp_filter "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.conf.default.accept_source_route "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nkernel.sysrq "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nkernel.core_uses_pid "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nkernel.msgmnb "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\nkernel.msgmax "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\nkernel.shmmax "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("68719476736")]),s._v("\nkernel.shmall "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4294967296")]),s._v("\nnet.core.wmem_default "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.core.rmem_default "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.core.rmem_max "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16777216")]),s._v("\nnet.core.wmem_max "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16777216")]),s._v("\nnet.ipv4.route.gc_timeout "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\nnet.ipv4.tcp_retries2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nnet.ipv4.tcp_fin_timeout "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\nnet.ipv4.tcp_wmem "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8192")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16777216")]),s._v("\nnet.ipv4.tcp_rmem "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16777216")]),s._v("\nnet.ipv4.tcp_mem "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("94500000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("915000000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("927000000")]),s._v("\nnet.core.somaxconn "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\nnet.core.netdev_max_backlog "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\nnet.core.wmem_default "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.core.rmem_default "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.core.rmem_max "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16777216")]),s._v("\nnet.core.wmem_max "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16777216")]),s._v("\nnet.ipv4.route.gc_timeout "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\nnet.ipv4.ip_local_port_range "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10024")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\nnet.ipv4.tcp_retries2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nnet.ipv4.tcp_syn_retries "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nnet.ipv4.tcp_synack_retries "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nnet.ipv4.tcp_timestamps "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nnet.ipv4.tcp_tw_recycle "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.tcp_tw_reuse "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.tcp_keepalive_time "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1800")]),s._v("\nnet.ipv4.tcp_keepalive_probes "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nnet.ipv4.tcp_keepalive_intvl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\nnet.ipv4.tcp_max_orphans "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3276800")]),s._v("\nnet.ipv4.tcp_wmem "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8192")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16777216")]),s._v("\nnet.ipv4.tcp_rmem "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16777216")]),s._v("\nnet.ipv4.tcp_mem "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("94500000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("915000000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("927000000")]),s._v("\nfs.file-max "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\nkernel.pid_max "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\nnet.ipv4.tcp_wmem "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("87380")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.core.wmem_max "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.core.netdev_max_backlog "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\nnet.ipv4.tcp_window_scaling "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.tcp_max_syn_backlog "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("\nnet.core.netdev_max_backlog "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\nnet.core.somaxconn "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\nnet.ipv4.tcp_max_orphans "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3276800")]),s._v("\nnet.ipv4.tcp_max_syn_backlog "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\nnet.ipv4.tcp_timestamps "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nnet.ipv4.tcp_syn_retries "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.tcp_synack_retries "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.tcp_syncookies "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.tcp_tw_reuse "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.tcp_tw_recycle "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nnet.ipv4.tcp_fin_timeout "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\nnet.ipv4.tcp_keepalive_time "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),s._v("\nnet.ipv4.ip_local_port_range "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65000")]),s._v("\nnet.ipv4.tcp_max_syn_backlog "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\nnet.ipv4.tcp_max_tw_buckets "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("36000")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("主机安全仅仅为网络安全中的一小部分，整个网络环境的安全防护不仅仅是靠加固主机安全就能完成，除此之外，还得需要一系列的安全设备（IDS、IPS、探针、WAF等等）、产品来完成\n还需从应用层面去入手，代码审计，渗透测试，内部人员的审计，管理也很重要；世界上没有完全安全的网络，网络安全必须未雨绸缪，只有不断的去发掘漏洞，完善漏洞，才能让网络更加安全")])]),s._v(" "),e("blockquote",[e("p",[s._v("本文作者："),e("a",{attrs:{href:"https://dbsecurity.com.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("许怀安"),e("OutboundLink")],1),s._v(" "),e("br"),s._v("创作时间：2022.5.22\n"),e("br"),s._v("版权声明：本博客所有文章除特别声明外，均采用"),e("a",{attrs:{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_blank",rel:"noopener noreferrer"}},[s._v("BY-NC-SA"),e("OutboundLink")],1),s._v("许可协议。转载请禀明出处！")])])])}),[],!1,null,null,null);a.default=n.exports}}]);