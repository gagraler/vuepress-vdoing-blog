(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{505:function(e,s,a){"use strict";a.r(s);var r=a(19),t=Object(r.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"在线升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在线升级"}},[e._v("#")]),e._v(" 在线升级")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),a("p",[e._v("本升级方法适用于所有Centos7.x系列的OS")])]),e._v(" "),a("h1",{attrs:{id:"一、查看当前内核版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、查看当前内核版本"}},[e._v("#")]),e._v(" 一、查看当前内核版本")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("uname")]),e._v(" -a\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("3.10.0-514.el7.x86_64\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" /etc/redhat-release\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("CentOS Linux release 7.3.1611 (Core)\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h1",{attrs:{id:"二、升级内核"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、升级内核"}},[e._v("#")]),e._v(" 二、升级内核")]),e._v(" "),a("h2",{attrs:{id:"_2-1-更新yum仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-更新yum仓库"}},[e._v("#")]),e._v(" 2.1 更新yum仓库")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("yum update\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-2-启用-elrepo-仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-启用-elrepo-仓库"}},[e._v("#")]),e._v(" 2.2 启用 ELRepo 仓库")]),e._v(" "),a("p",[e._v("ELRepo 仓库是基于社区的用于企业级 Linux 仓库，提供对 RedHat Enterprise (RHEL) 和 其他基于 RHEL的 Linux 发行版（CentOS、Scientific、Fedora 等）的支持。\nELRepo 聚焦于和硬件相关的软件包，包括文件系统驱动、显卡驱动、网络驱动、声卡驱动和摄像头驱动等。")]),e._v(" "),a("h3",{attrs:{id:"_2-2-1-导入elrepo仓库的公共密钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-导入elrepo仓库的公共密钥"}},[e._v("#")]),e._v(" 2.2.1 导入ELRepo仓库的公共密钥")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rpm")]),e._v(" --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-2-2-安装elrepo仓库的yum源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-安装elrepo仓库的yum源"}},[e._v("#")]),e._v(" 2.2.2 安装ELRepo仓库的yum源")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rpm")]),e._v(" -Uvh http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-3-查看可用的系统内核包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-查看可用的系统内核包"}},[e._v("#")]),e._v(" 2.3 查看可用的系统内核包")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("yum --disablerepo"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"*"')]),e._v(" --enablerepo"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"elrepo-kernel"')]),e._v(" list available\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Loaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n* elrepo-kernel: mirrors.tuna.tsinghua.edu.cn\n  elrepo-kernel                                                                                                                                                                 | 2.9 kB  00:00:00     \n  elrepo-kernel/primary_db                                                                                                                                                      | 1.8 MB  00:00:03     \n  Available Packages\n  kernel-lt.x86_64                                                                                  4.4.155-1.el7.elrepo                                                                  elrepo-kernel\n  kernel-lt-devel.x86_64                                                                            4.4.155-1.el7.elrepo                                                                  elrepo-kernel\n  kernel-lt-doc.noarch                                                                              4.4.155-1.el7.elrepo                                                                  elrepo-kernel\n  kernel-lt-headers.x86_64                                                                          4.4.155-1.el7.elrepo                                                                  elrepo-kernel\n  kernel-lt-tools.x86_64                                                                            4.4.155-1.el7.elrepo                                                                  elrepo-kernel\n  kernel-lt-tools-libs.x86_64                                                                       4.4.155-1.el7.elrepo                                                                  elrepo-kernel\n  kernel-lt-tools-libs-devel.x86_64                                                                 4.4.155-1.el7.elrepo                                                                  elrepo-kernel\n  kernel-ml.x86_64                                                                                  4.18.7-1.el7.elrepo                                                                   elrepo-kernel\n  kernel-ml-devel.x86_64                                                                            4.18.7-1.el7.elrepo                                                                   elrepo-kernel\n  kernel-ml-doc.noarch                                                                              4.18.7-1.el7.elrepo                                                                   elrepo-kernel\n  kernel-ml-headers.x86_64                                                                          4.18.7-1.el7.elrepo                                                                   elrepo-kernel\n  kernel-ml-tools.x86_64                                                                            4.18.7-1.el7.elrepo                                                                   elrepo-kernel\n  kernel-ml-tools-libs.x86_64                                                                       4.18.7-1.el7.elrepo                                                                   elrepo-kernel\n  kernel-ml-tools-libs-devel.x86_64                                                                 4.18.7-1.el7.elrepo                                                                   elrepo-kernel\n  perf.x86_64                                                                                       4.18.7-1.el7.elrepo                                                                   elrepo-kernel\n  python-perf.x86_64                                                                                4.18.7-1.el7.elrepo                                                                   elrepo-kernel\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br")])]),a("h2",{attrs:{id:"_2-4-安装最新版本内核"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-安装最新版本内核"}},[e._v("#")]),e._v(" 2.4 安装最新版本内核")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("yum --enablerepo"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("elrepo-kernel "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" kernel-ml\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("font",{attrs:{color:"red"}},[a("strong",[e._v("--enablerepo")])]),e._v(" 选项开启 CentOS 系统上的指定仓库。默认开启的是"),a("font",{attrs:{color:"red"}},[a("strong",[e._v("elrepo")])]),e._v("，这里用  "),a("font",{attrs:{color:"red"}},[a("strong",[e._v("-kernel")])]),e._v("  替换")],1),e._v(" "),a("h2",{attrs:{id:"_2-5-设置-grub2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-设置-grub2"}},[e._v("#")]),e._v(" 2.5 设置 grub2")]),e._v(" "),a("p",[e._v("内核安装好后，需要设置为默认启动选项并重启后才会生效")]),e._v(" "),a("h3",{attrs:{id:"_2-5-1-查看系统上的所有可用内核"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1-查看系统上的所有可用内核"}},[e._v("#")]),e._v(" 2.5.1 查看系统上的所有可用内核")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("awk")]),e._v(" -F"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("' "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'$1=="menuentry " {print i++ " : " $2}\'')]),e._v(" /etc/grub2.cfg\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("0 : CentOS Linux (4.18.7-1.el7.elrepo.x86_64) 7 (Core)\n1 : CentOS Linux (3.10.0-862.11.6.el7.x86_64) 7 (Core)\n2 : CentOS Linux (3.10.0-514.el7.x86_64) 7 (Core)\n3 : CentOS Linux (0-rescue-063ec330caa04d4baae54c6902c62e54) 7 (Core)\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h3",{attrs:{id:"_2-5-2-设置新的内核为grub2的默认版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-设置新的内核为grub2的默认版本"}},[e._v("#")]),e._v(" 2.5.2 设置新的内核为grub2的默认版本")]),e._v(" "),a("p",[e._v("服务器上存在4 个内核，我们要使用 4.18 这个版本，可以通过 grub2-set-default 0 命令或编辑 /etc/default/grub 文件来设置")]),e._v(" "),a("h4",{attrs:{id:"_2-5-2-1-通过-grub2-set-default-0-命令设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-1-通过-grub2-set-default-0-命令设置"}},[e._v("#")]),e._v(" 2.5.2.1 通过 "),a("font",{attrs:{color:"red"}},[a("strong",[e._v("grub2-set-default 0")])]),e._v(" 命令设置")],1),e._v(" "),a("p",[e._v("其中 0 是上面查询出来的可用内核")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("grub2-set-default "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-5-2-2-方法2、编辑-etc-default-grub-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-2-方法2、编辑-etc-default-grub-文件"}},[e._v("#")]),e._v(" 2.5.2.2 方法2、编辑 "),a("font",{attrs:{color:"red"}},[a("strong",[e._v("/etc/default/grub")])]),e._v(" 文件")],1),e._v(" "),a("p",[e._v("设置 GRUB_DEFAULT=0，通过上面查询显示的编号为 0 的内核作为默认内核：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("vim")]),e._v(" /etc/default/grub\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('GRUB_TIMEOUT=5\nGRUB_DISTRIBUTOR="$(sed \'s, release .*$,,g\' /etc/system-release)"\nGRUB_DEFAULT=0\nGRUB_DISABLE_SUBMENU=true\nGRUB_TERMINAL_OUTPUT="console"\nGRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=cl/root rhgb quiet"\nGRUB_DISABLE_RECOVERY="true"\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("h3",{attrs:{id:"_2-5-3-生成-grub-配置文件并重启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-3-生成-grub-配置文件并重启"}},[e._v("#")]),e._v(" 2.5.3 生成 grub 配置文件并重启")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("grub2-mkconfig -o /boot/grub2/grub.cfg\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Generating grub configuration file ...\nFound linux image: /boot/vmlinuz-4.18.7-1.el7.elrepo.x86_64\nFound initrd image: /boot/initramfs-4.18.7-1.el7.elrepo.x86_64.img\nFound linux image: /boot/vmlinuz-3.10.0-862.11.6.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-862.11.6.el7.x86_64.img\nFound linux image: /boot/vmlinuz-3.10.0-514.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-514.el7.x86_64.img\nFound linux image: /boot/vmlinuz-0-rescue-063ec330caa04d4baae54c6902c62e54\nFound initrd image: /boot/initramfs-0-rescue-063ec330caa04d4baae54c6902c62e54.img\ndone\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("reboot")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-6-验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-验证"}},[e._v("#")]),e._v(" 2.6 验证")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("uname")]),e._v(" -r\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("4.18.7-1.el7.elrepo.x86_64\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-7-删除旧的内核-可选"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-删除旧的内核-可选"}},[e._v("#")]),e._v(" 2.7 删除旧的内核（可选）")]),e._v(" "),a("h3",{attrs:{id:"_2-7-1-查看系统中全部的内核"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-1-查看系统中全部的内核"}},[e._v("#")]),e._v(" 2.7.1 查看系统中全部的内核：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rpm")]),e._v(" -qa "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" kernel\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kernel-3.10.0-514.el7.x86_64\nkernel-ml-4.18.7-1.el7.elrepo.x86_64\nkernel-tools-libs-3.10.0-862.11.6.el7.x86_64\nkernel-tools-3.10.0-862.11.6.el7.x86_64\nkernel-3.10.0-862.11.6.el7.x86_64\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h3",{attrs:{id:"方法一-通过-yum-remove删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法一-通过-yum-remove删除"}},[e._v("#")]),e._v(" 方法一：通过 "),a("font",{attrs:{color:"red"}},[a("strong",[e._v("yum remove")])]),e._v("删除")],1),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("yum remove kernel-3.10.0-514.el7.x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nkernel-ml-4.18.7-1.el7.elrepo.x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nkernel-tools-libs-3.10.0-862.11.6.el7.x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nkernel-tools-3.10.0-862.11.6.el7.x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nkernel-3.10.0-862.11.6.el7.x86_64\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h3",{attrs:{id:"方法二-使用-yum-utils工具删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法二-使用-yum-utils工具删除"}},[e._v("#")]),e._v(" 方法二：使用 "),a("font",{attrs:{color:"red"}},[a("strong",[e._v("yum-utils")])]),e._v("工具删除")],1),e._v(" "),a("p",[e._v("如果安装的内核不多于 3 个，"),a("font",{attrs:{color:"red"}},[a("strong",[e._v("yum-utils")])]),e._v(" 工具不会删除任何一个。只有在安装的内核大于 3 个时，才会自动删除旧内核。")],1),e._v(" "),a("p",[e._v("安装yum-utils")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" yum-utils\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("删除旧版本")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("package-cleanup --oldkernels\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("blockquote",[a("p",[e._v("本文作者："),a("a",{attrs:{href:"https://dbsecurity.com.cn/",target:"_blank",rel:"noopener noreferrer"}},[e._v("许怀安"),a("OutboundLink")],1),e._v(" "),a("br"),e._v("创作时间：2022.03.01\n"),a("br"),e._v("版权声明：本博客所有文章除特别声明外，均采用"),a("a",{attrs:{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_blank",rel:"noopener noreferrer"}},[e._v("BY-NC-SA"),a("OutboundLink")],1),e._v("许可协议。转载请禀明出处！")])])])}),[],!1,null,null,null);s.default=t.exports}}]);